

<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.3,user-scalable=no" />
<head>
    <title>好好笑der</title>
    <link rel="shortcut icon" type="image/x-icon" id="links" />
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?910e858ffb58677c1e9933ea61c21440";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();

        var num = Math.ceil(Math.random()*10);
        document.getElementById("links").href="res/image/ico/"+num+".ico";
    </script>
</head>
<body>
<div class="headerPage"></div>
<div class="main">

    <div><input type="file" id="file_input" name="img" /></div>
    <div>
        <img id="showimg"  style=" width:820px;">

        <script type="text/javascript">
            var showimg = document.getElementById("showimg");
            var imginput = document.getElementById("file_input");
            imginput.onchange = function () {

                var files = this.files;
                var url = URL.createObjectURL(files[0]);
                showimg.src=url;
            }


        </script>
        <script type="text/javascript">
            console.clear();
            var img = document.getElementById("showimg");//图片路径
            console.log("asd");
            function getBase64Image(img) {
                var canvas = document.createElement("canvas");
                canvas.width = img.width;
                canvas.height = img.height;
                var ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, img.width, img.height);
                var ext = img.src.substring(img.src.lastIndexOf(".")+1).toLowerCase();
                var dataURL = canvas.toDataURL("image/"+ext);
                return dataURL;
            }

            var image = new Image();
            image = img;
            image.onload = function(){
                var base64 = getBase64Image(image);
                console.log(base64);
                document.getElementById("base64_output").value=base64;
            }

        </script>
    </div>
    <div>
        <textarea id="base64_output" name="Word" style=" width:820px;height:200px; overflow-y:scroll;" ></textarea>
    </div>




</div>
<div class="footerPage"></div>

<script src="//apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
    $(function(){
        /*公共部分
         * 导航栏
         * footer CopyRight
         */
        $(".headerpage").load("./mould/header.html");
        $(".footerpage").load("./mould/footer.html");
    });
</script>

</body>
</html>
